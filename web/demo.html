<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>optipix Demo ‚Äî Try it in your browser</title>
  <meta name="description" content="Try optipix image optimization right in your browser. Drag & drop images to see GPU-accelerated compression in action.">
  <meta property="og:title" content="optipix Demo ‚Äî Try it in your browser">
  <meta property="og:description" content="Drag & drop images to see Metal-accelerated compression in action.">
  <meta property="og:url" content="https://optipix.dev/demo">
  <link rel="icon" type="image/svg+xml" href="favicon.svg">

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: { 400: '#38bdf8', 500: '#0ea5e9', 600: '#0284c7' },
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', '-apple-system', 'sans-serif'],
            mono: ['JetBrains Mono', 'SF Mono', 'Menlo', 'monospace'],
          }
        }
      }
    }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

  <style>
    .gradient-text {
      background: linear-gradient(135deg, #0ea5e9 0%, #f97316 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .drop-zone { transition: all 0.2s ease; }
    .drop-zone.drag-over { border-color: #0ea5e9; background: rgba(14,165,233,0.08); transform: scale(1.01); }
    .slider-track { -webkit-appearance: none; background: transparent; }
    .slider-track::-webkit-slider-runnable-track { height: 6px; border-radius: 3px; background: linear-gradient(90deg, #0ea5e9 0%, #f97316 100%); }
    .slider-track::-webkit-slider-thumb { -webkit-appearance: none; width: 20px; height: 20px; border-radius: 50%; background: white; margin-top: -7px; cursor: pointer; box-shadow: 0 2px 6px rgba(0,0,0,0.3); }
    .compare-slider { position: relative; overflow: hidden; cursor: col-resize; user-select: none; }
    .compare-slider .divider { position: absolute; top: 0; bottom: 0; width: 3px; background: white; z-index: 10; pointer-events: none; }
    .compare-slider .divider::after { content: '‚ü® ‚ü©'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; color: #0f172a; font-size: 12px; font-weight: bold; padding: 4px 8px; border-radius: 20px; white-space: nowrap; }
    .terminal { background: #0f172a; box-shadow: 0 0 0 1px rgba(255,255,255,0.05), 0 25px 50px -12px rgba(0,0,0,0.5); }
    .terminal-dot { width: 12px; height: 12px; border-radius: 50%; }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }
    .processing { animation: pulse 1s infinite; }
  </style>
</head>

<body class="bg-slate-950 text-white antialiased min-h-screen">

  <!-- NAV -->
  <nav class="fixed top-0 w-full z-50 bg-slate-950/80 backdrop-blur-lg border-b border-white/5">
    <div class="max-w-6xl mx-auto px-6 h-16 flex items-center justify-between">
      <a href="index.html" class="flex items-center gap-2 font-bold text-lg">
        <span class="text-2xl">‚ö°</span>
        <span>optipix</span>
      </a>
      <div class="hidden md:flex items-center gap-8 text-sm text-slate-400">
        <a href="index.html#features" class="hover:text-white transition">Features</a>
        <a href="docs.html" class="hover:text-white transition">Docs</a>
        <a href="demo.html" class="text-white font-medium">Demo</a>
        <a href="index.html#pricing" class="hover:text-white transition">Pricing</a>
      </div>
      <a href="index.html#pricing" class="bg-brand-500 hover:bg-brand-400 text-white text-sm font-medium px-4 py-2 rounded-lg transition">
        Download
      </a>
    </div>
  </nav>

  <!-- HERO -->
  <section class="pt-28 pb-8">
    <div class="max-w-4xl mx-auto px-6 text-center">
      <h1 class="text-4xl md:text-5xl font-black tracking-tight mb-4">
        Try <span class="gradient-text">optipix</span> in your browser
      </h1>
      <p class="text-lg text-slate-400 max-w-xl mx-auto mb-2">
        Drag & drop an image to see real-time compression. Adjust quality, format, and resize ‚Äî all client-side.
      </p>
      <p class="text-sm text-slate-500">
        Your images never leave your device. Processing happens entirely in the browser.
      </p>
    </div>
  </section>

  <!-- DEMO APP -->
  <section class="pb-20">
    <div class="max-w-5xl mx-auto px-6">

      <!-- Drop Zone -->
      <div id="dropZone" class="drop-zone border-2 border-dashed border-slate-700 rounded-2xl p-12 text-center cursor-pointer mb-8 hover:border-slate-500 transition">
        <div id="dropContent">
          <div class="text-5xl mb-4">üìÅ</div>
          <p class="text-xl font-semibold mb-2">Drop an image here</p>
          <p class="text-slate-400 mb-4">or click to select a file</p>
          <p class="text-xs text-slate-600">Supports PNG, JPEG, WebP ¬∑ Max 20 MB</p>
        </div>
        <input type="file" id="fileInput" class="hidden" accept="image/png,image/jpeg,image/webp">
      </div>

      <!-- Controls (hidden until image loaded) -->
      <div id="controls" class="hidden mb-8">
        <div class="bg-slate-900/50 border border-white/5 rounded-2xl p-6">
          <div class="grid md:grid-cols-3 gap-6">

            <!-- Format -->
            <div>
              <label class="block text-sm font-medium text-slate-300 mb-2">Output Format</label>
              <div class="flex gap-2">
                <button onclick="setFormat('original')" id="fmt-original" class="fmt-btn px-4 py-2 rounded-lg text-sm font-medium bg-brand-500 text-white transition">Original</button>
                <button onclick="setFormat('jpeg')" id="fmt-jpeg" class="fmt-btn px-4 py-2 rounded-lg text-sm font-medium bg-white/5 text-slate-400 hover:text-white transition">JPEG</button>
                <button onclick="setFormat('webp')" id="fmt-webp" class="fmt-btn px-4 py-2 rounded-lg text-sm font-medium bg-white/5 text-slate-400 hover:text-white transition">WebP</button>
                <button onclick="setFormat('png')" id="fmt-png" class="fmt-btn px-4 py-2 rounded-lg text-sm font-medium bg-white/5 text-slate-400 hover:text-white transition">PNG</button>
              </div>
            </div>

            <!-- Quality -->
            <div>
              <label class="block text-sm font-medium text-slate-300 mb-2">
                Quality: <span id="qualityValue" class="text-brand-400 font-bold">85</span>%
              </label>
              <input type="range" id="qualitySlider" min="10" max="100" value="85"
                class="slider-track w-full cursor-pointer" oninput="updateQuality(this.value)">
            </div>

            <!-- Resize -->
            <div>
              <label class="block text-sm font-medium text-slate-300 mb-2">Max Dimension</label>
              <select id="resizeSelect" onchange="reprocess()" class="w-full bg-slate-800 border border-white/10 rounded-lg px-4 py-2 text-sm text-white">
                <option value="0">No resize</option>
                <option value="3840">4K (3840px)</option>
                <option value="1920">Full HD (1920px)</option>
                <option value="1280">HD (1280px)</option>
                <option value="800">Web (800px)</option>
                <option value="400">Thumbnail (400px)</option>
              </select>
            </div>
          </div>

          <!-- Action button -->
          <div class="mt-6 flex items-center justify-between">
            <button onclick="reprocess()" class="bg-brand-500 hover:bg-brand-400 text-white font-semibold px-6 py-2.5 rounded-xl transition">
              ‚ö° Optimize
            </button>
            <button onclick="downloadResult()" id="downloadBtn" class="hidden bg-white/5 hover:bg-white/10 text-white font-medium px-6 py-2.5 rounded-xl border border-white/10 transition">
              ‚¨á Download optimized
            </button>
          </div>
        </div>
      </div>

      <!-- Results -->
      <div id="results" class="hidden">

        <!-- Stats bar -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
          <div class="bg-slate-900/50 border border-white/5 rounded-xl p-4 text-center">
            <p class="text-xs text-slate-500 uppercase tracking-wider mb-1">Original</p>
            <p id="statOriginal" class="text-xl font-bold text-white">‚Äî</p>
          </div>
          <div class="bg-slate-900/50 border border-white/5 rounded-xl p-4 text-center">
            <p class="text-xs text-slate-500 uppercase tracking-wider mb-1">Optimized</p>
            <p id="statOptimized" class="text-xl font-bold text-green-400">‚Äî</p>
          </div>
          <div class="bg-slate-900/50 border border-white/5 rounded-xl p-4 text-center">
            <p class="text-xs text-slate-500 uppercase tracking-wider mb-1">Saved</p>
            <p id="statSaved" class="text-xl font-bold text-brand-400">‚Äî</p>
          </div>
          <div class="bg-slate-900/50 border border-white/5 rounded-xl p-4 text-center">
            <p class="text-xs text-slate-500 uppercase tracking-wider mb-1">Time</p>
            <p id="statTime" class="text-xl font-bold text-orange-400">‚Äî</p>
          </div>
        </div>

        <!-- Image compare -->
        <div class="grid md:grid-cols-2 gap-6 mb-8">
          <div>
            <p class="text-sm text-slate-500 mb-2 font-medium">Original <span id="origDims" class="text-slate-600"></span></p>
            <div class="bg-slate-900 rounded-xl overflow-hidden border border-white/5">
              <img id="previewOriginal" class="w-full h-auto" alt="Original image">
            </div>
          </div>
          <div>
            <p class="text-sm text-slate-500 mb-2 font-medium">Optimized <span id="optDims" class="text-slate-600"></span></p>
            <div class="bg-slate-900 rounded-xl overflow-hidden border border-white/5 relative">
              <img id="previewOptimized" class="w-full h-auto" alt="Optimized image">
              <div id="processingOverlay" class="hidden absolute inset-0 bg-slate-900/80 flex items-center justify-center">
                <span class="text-brand-400 processing text-lg font-medium">‚ö° Optimizing...</span>
              </div>
            </div>
          </div>
        </div>

        <!-- CLI equivalent -->
        <div class="terminal rounded-xl overflow-hidden">
          <div class="flex items-center gap-2 px-4 py-3 border-b border-white/5">
            <span class="terminal-dot bg-red-500/80"></span>
            <span class="terminal-dot bg-yellow-500/80"></span>
            <span class="terminal-dot bg-green-500/80"></span>
            <span class="text-xs text-slate-500 ml-2 font-mono">CLI equivalent</span>
          </div>
          <div class="p-5 font-mono text-sm">
            <p class="text-slate-500">$ # Same result with the CLI:</p>
            <p id="cliCommand" class="text-green-400 mt-1">$ optipix photo.jpg --format webp --quality 85</p>
          </div>
        </div>
      </div>

      <!-- CLI upsell -->
      <div class="mt-12 text-center">
        <div class="bg-gradient-to-r from-brand-500/10 to-orange-500/10 border border-brand-500/20 rounded-2xl p-8">
          <h2 class="text-2xl font-bold mb-3">Want 25√ó faster results?</h2>
          <p class="text-slate-400 mb-6 max-w-lg mx-auto">
            This browser demo uses Canvas API. The real <strong class="text-white">optipix CLI</strong> uses Apple Metal GPU
            for hardware-accelerated processing ‚Äî batch hundreds of images in seconds.
          </p>
          <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
            <a href="index.html#pricing" class="bg-brand-500 hover:bg-brand-400 text-white font-semibold px-8 py-3 rounded-xl transition">
              Download CLI ‚Äî Free Trial
            </a>
            <a href="docs.html" class="text-slate-400 hover:text-white text-sm transition">
              Read the documentation ‚Üí
            </a>
          </div>
        </div>
      </div>

    </div>
  </section>

  <!-- FOOTER -->
  <footer class="py-12 border-t border-white/5">
    <div class="max-w-6xl mx-auto px-6">
      <div class="flex flex-col md:flex-row items-center justify-between gap-6">
        <div class="flex items-center gap-2 text-sm text-slate-500">
          <span class="text-lg">‚ö°</span> optipix
          <span class="mx-2">¬∑</span>
          Built by <a href="https://htmeta.dev" class="text-slate-400 hover:text-white transition">HTMETA.dev</a>
        </div>
        <div class="flex items-center gap-6 text-sm text-slate-500">
          <a href="docs.html" class="hover:text-white transition">Documentation</a>
          <a href="demo.html" class="hover:text-white transition">Demo</a>
          <a href="index.html#pricing" class="hover:text-white transition">Pricing</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // ‚îÄ‚îÄ State ‚îÄ‚îÄ
    let originalFile = null;
    let originalImage = null;
    let resultBlob = null;
    let currentFormat = 'original';
    let currentQuality = 85;

    // ‚îÄ‚îÄ DOM refs ‚îÄ‚îÄ
    const dropZone = document.getElementById('dropZone');
    const fileInput = document.getElementById('fileInput');
    const controls = document.getElementById('controls');
    const results = document.getElementById('results');

    // ‚îÄ‚îÄ Drop zone ‚îÄ‚îÄ
    dropZone.addEventListener('click', () => fileInput.click());
    dropZone.addEventListener('dragover', e => { e.preventDefault(); dropZone.classList.add('drag-over'); });
    dropZone.addEventListener('dragleave', () => dropZone.classList.remove('drag-over'));
    dropZone.addEventListener('drop', e => {
      e.preventDefault();
      dropZone.classList.remove('drag-over');
      if (e.dataTransfer.files.length) handleFile(e.dataTransfer.files[0]);
    });
    fileInput.addEventListener('change', e => { if (e.target.files.length) handleFile(e.target.files[0]); });

    // ‚îÄ‚îÄ Handle file ‚îÄ‚îÄ
    function handleFile(file) {
      if (!file.type.match(/^image\/(png|jpeg|webp)$/)) {
        alert('Please select a PNG, JPEG, or WebP image.');
        return;
      }
      if (file.size > 20 * 1024 * 1024) {
        alert('Image too large. Max 20 MB.');
        return;
      }

      originalFile = file;

      // Detect format
      if (file.type === 'image/png') currentFormat = 'png';
      else if (file.type === 'image/webp') currentFormat = 'webp';
      else currentFormat = 'jpeg';

      // Set active format button
      document.querySelectorAll('.fmt-btn').forEach(b => {
        b.className = 'fmt-btn px-4 py-2 rounded-lg text-sm font-medium bg-white/5 text-slate-400 hover:text-white transition';
      });
      document.getElementById('fmt-original').className = 'fmt-btn px-4 py-2 rounded-lg text-sm font-medium bg-brand-500 text-white transition';

      // Show original preview
      const reader = new FileReader();
      reader.onload = e => {
        const img = new Image();
        img.onload = () => {
          originalImage = img;
          document.getElementById('previewOriginal').src = e.target.result;
          document.getElementById('origDims').textContent = `(${img.width}√ó${img.height})`;

          // Update drop zone
          dropZone.innerHTML = `
            <div class="flex items-center gap-4">
              <img src="${e.target.result}" class="h-16 w-16 object-cover rounded-lg">
              <div class="text-left">
                <p class="font-medium">${file.name}</p>
                <p class="text-sm text-slate-400">${formatBytes(file.size)} ¬∑ ${img.width}√ó${img.height}</p>
              </div>
              <p class="text-sm text-slate-500 ml-auto">Drop another image to replace</p>
            </div>
          `;

          controls.classList.remove('hidden');
          results.classList.remove('hidden');
          reprocess();
        };
        img.src = e.target.result;
      };
      reader.readAsDataURL(file);
    }

    // ‚îÄ‚îÄ Format selection ‚îÄ‚îÄ
    function setFormat(fmt) {
      currentFormat = fmt === 'original' ? getOriginalFormat() : fmt;
      document.querySelectorAll('.fmt-btn').forEach(b => {
        b.className = 'fmt-btn px-4 py-2 rounded-lg text-sm font-medium bg-white/5 text-slate-400 hover:text-white transition';
      });
      document.getElementById('fmt-' + fmt).className = 'fmt-btn px-4 py-2 rounded-lg text-sm font-medium bg-brand-500 text-white transition';
      reprocess();
    }

    function getOriginalFormat() {
      if (!originalFile) return 'jpeg';
      if (originalFile.type === 'image/png') return 'png';
      if (originalFile.type === 'image/webp') return 'webp';
      return 'jpeg';
    }

    // ‚îÄ‚îÄ Quality ‚îÄ‚îÄ
    function updateQuality(val) {
      currentQuality = parseInt(val);
      document.getElementById('qualityValue').textContent = val;
      reprocess();
    }

    // ‚îÄ‚îÄ Reprocess ‚îÄ‚îÄ
    let processTimer = null;
    function reprocess() {
      clearTimeout(processTimer);
      processTimer = setTimeout(doProcess, 150); // debounce
    }

    function doProcess() {
      if (!originalImage || !originalFile) return;

      const overlay = document.getElementById('processingOverlay');
      overlay.classList.remove('hidden');

      const startTime = performance.now();

      // Determine output size
      const maxDim = parseInt(document.getElementById('resizeSelect').value);
      let outW = originalImage.width;
      let outH = originalImage.height;
      if (maxDim > 0 && (outW > maxDim || outH > maxDim)) {
        const ratio = Math.min(maxDim / outW, maxDim / outH);
        outW = Math.round(outW * ratio);
        outH = Math.round(outH * ratio);
      }

      // Draw to canvas
      const canvas = document.createElement('canvas');
      canvas.width = outW;
      canvas.height = outH;
      const ctx = canvas.getContext('2d');
      ctx.drawImage(originalImage, 0, 0, outW, outH);

      // Determine MIME
      let mime = 'image/jpeg';
      if (currentFormat === 'png') mime = 'image/png';
      else if (currentFormat === 'webp') mime = 'image/webp';

      // Encode
      const quality = currentFormat === 'png' ? undefined : currentQuality / 100;

      canvas.toBlob(blob => {
        if (!blob) {
          overlay.classList.add('hidden');
          return;
        }

        resultBlob = blob;
        const elapsed = performance.now() - startTime;

        // Preview
        const url = URL.createObjectURL(blob);
        document.getElementById('previewOptimized').src = url;
        document.getElementById('optDims').textContent = `(${outW}√ó${outH})`;

        // Stats
        const saved = originalFile.size - blob.size;
        const pct = ((saved / originalFile.size) * 100).toFixed(1);

        document.getElementById('statOriginal').textContent = formatBytes(originalFile.size);
        document.getElementById('statOptimized').textContent = formatBytes(blob.size);
        document.getElementById('statSaved').textContent = saved > 0 ? `${pct}%` : '0%';
        document.getElementById('statTime').textContent = `${elapsed.toFixed(0)}ms`;

        // Color stats
        const savedEl = document.getElementById('statSaved');
        savedEl.className = saved > 0 ? 'text-xl font-bold text-green-400' : 'text-xl font-bold text-yellow-400';

        // CLI equivalent
        let cmd = `$ optipix ${originalFile.name}`;
        if (currentFormat !== getOriginalFormat()) cmd += ` --format ${currentFormat}`;
        if (currentFormat !== 'png') cmd += ` --quality ${currentQuality}`;
        if (maxDim > 0) cmd += ` --resize ${outW}x${outH}`;
        document.getElementById('cliCommand').textContent = cmd;

        // Show download
        document.getElementById('downloadBtn').classList.remove('hidden');

        overlay.classList.add('hidden');
      }, mime, quality);
    }

    // ‚îÄ‚îÄ Download ‚îÄ‚îÄ
    function downloadResult() {
      if (!resultBlob || !originalFile) return;
      const ext = currentFormat === 'jpeg' ? 'jpg' : currentFormat;
      const baseName = originalFile.name.replace(/\.[^.]+$/, '');
      const a = document.createElement('a');
      a.href = URL.createObjectURL(resultBlob);
      a.download = `${baseName}-optimized.${ext}`;
      a.click();
    }

    // ‚îÄ‚îÄ Helpers ‚îÄ‚îÄ
    function formatBytes(bytes) {
      if (bytes < 1024) return bytes + ' B';
      if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
      return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
    }
  </script>
</body>
</html>
